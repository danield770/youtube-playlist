{"version":3,"sources":["Components/PlayListItem.js","database/firebase.js","hooks/useFetch.js","Components/AddVideo.js","helper/util.js","Components/PlayList.js","Components/Video.js","App.js","reportWebVitals.js","index.js"],"names":["StyledItem","styled","li","StyledButton","button","StyledTitle","span","PlayListItem","id","title","duration","deleteVideo","index","draggableId","provided","draggableProps","dragHandleProps","ref","innerRef","type","onClick","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","videosRef","firestore","collection","query","orderBy","addVideo","a","youtubeId","timestamp","doc","set","delete","getDocument","get","exists","data","updateDocument","prop","value","update","useFetch","url","useState","setData","isLoading","setIsLoading","useEffect","fetch","then","res","json","catch","err","spin","keyframes","StyledSpinner","div","StyledError","StyledForm","form","StyledInput","input","AddVideo","addvideo","formValue","setFormValue","setUrl","isFormValid","errorMsg","validation","setValidation","videoObj","videoData","items","console","log","Date","now","snippet","hours","temp","replace","split","length","slice","youtubeDurationToTimeString","contentDetails","prev","onSubmit","e","preventDefault","placeholder","onChange","target","str","validateObj","idFromInput","includes","undefined","indexOf","getIdFromInputString","test","isValidId","error","validate","validateInput","disabled","StyledContainer","StyledVideosList","ul","StyledEmpty","onDragEnd","result","destination","source","destinationId","document","querySelector","children","getAttribute","Promise","all","docs","PlayList","useCollectionData","videos","droppableId","droppableProps","map","video","Video","width","height","playing","controls","onEnded","StyledMain","main","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4299c6cb.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { Draggable } from 'react-beautiful-dnd';\n\nconst StyledItem = styled.li`\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: white;\n  border: 1px solid #111;\n  margin-bottom: 0.5rem;\n`;\n\nconst StyledButton = styled.button`\n  padding: 0.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  min-width: 2.5rem;\n`;\n\nconst StyledTitle = styled.span`\n  width: 70%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nfunction PlayListItem({ id, title, duration, deleteVideo, index }) {\n  return (\n    <Draggable draggableId={id} index={index}>\n      {(provided) => (\n        <StyledItem\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n          ref={provided.innerRef}\n        >\n          <StyledTitle title={title}>{title}</StyledTitle>\n          <span>{duration}</span>\n          <StyledButton\n            type='button'\n            onClick={() => {\n              deleteVideo(id);\n            }}\n          >\n            Delete\n          </StyledButton>\n        </StyledItem>\n      )}\n    </Draggable>\n  );\n}\n\nexport default PlayListItem;\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nfirebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\n  appId: process.env.REACT_APP_MESSAGING_APP_ID,\n});\n\nconst firestore = firebase.firestore();\nconst videosRef = firestore.collection('videos');\nexport const query = videosRef.orderBy('timestamp');\n\nexport const addVideo = async ({\n  id,\n  youtubeId,\n  title,\n  duration,\n  timestamp,\n}) => {\n  await videosRef.doc(id).set({\n    id,\n    title,\n    youtubeId,\n    duration,\n    timestamp,\n  });\n};\n\nexport const deleteVideo = async (id) => {\n  await videosRef.doc(id).delete();\n};\n\nexport const getDocument = async (id) => {\n  const doc = await videosRef.doc(id).get();\n  if (doc.exists) {\n    return doc.data();\n  }\n};\n\nexport const updateDocument = async (id, prop, value) => {\n  await videosRef.doc(id).update({ [prop]: value });\n};\n","import { useState, useEffect } from 'react';\n\nfunction useFetch(url) {\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    // console.log('useFetch: url: ', url);\n    if (url) {\n      setIsLoading(true);\n      setData(null);\n      fetch(url)\n        .then((res) => res.json())\n        .then((json) => {\n          setIsLoading(false);\n          setData(json);\n        })\n        .catch((err) => {\n          setIsLoading(false);\n        });\n    }\n  }, [url]);\n\n  return { data, isLoading };\n}\n\nexport default useFetch;\n","import React, { useState, useEffect } from 'react';\nimport { addVideo } from '../database/firebase';\nimport useFetch from '../hooks/useFetch';\nimport { youtubeDurationToTimeString, validate } from '../helper/util';\nimport styled, { keyframes } from 'styled-components';\n\nconst spin = keyframes`\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst StyledSpinner = styled.div`\n  width: 0.6rem;\n  height: 0.6rem;\n  border: 2px solid aqua;\n  border-top: 2px solid transparent;\n  border-radius: 50%;\n  animation: ${spin} 0.5s linear infinite;\n`;\n\nconst StyledError = styled.div`\n  color: red;\n  font-size: 0.8rem;\n  position: absolute;\n  left: 0;\n  top: 100%;\n  margin-top: 0.5rem;\n`;\n\nconst StyledForm = styled.form`\n  display: grid;\n  grid-gap: 1rem;\n  grid-template-columns: 1fr auto;\n  position: relative;\n`;\n\nconst StyledInput = styled.input`\n  padding: 0 0.5rem;\n`;\n\nconst StyledButton = styled.button`\n  padding: 0.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  min-width: 2.5rem;\n`;\n\nfunction AddVideo({ addvideo }) {\n  const BASEURL = 'https://youtube.googleapis.com/youtube/v3/videos';\n  const PART = 'snippet,contentDetails';\n  const KEY = 'AIzaSyAaDeAQGh5X6NRD4OK9iUjRlGnCAWPqEpg';\n\n  const [formValue, setFormValue] = useState('');\n  const [url, setUrl] = useState('');\n  const [validation, setValidation] = useState({\n    isFormValid: null,\n    errorMsg: '',\n    id: '',\n  });\n  const { data, isLoading } = useFetch(url);\n\n  useEffect(() => {\n    let videoObj = {};\n    let videoData = data?.items?.[0]?.id ? data.items[0] : null;\n\n    console.log('data', data);\n\n    if (data === null) {\n      // on initial mount data will be null\n      return;\n    }\n\n    if (videoData) {\n      videoObj.youtubeId = videoData.id;\n      videoObj.id = videoData.id + Date.now(); // enable same video in playlist mutiple times to have different IDs\n      videoObj.title = videoData.snippet.title;\n      videoObj.timestamp = Date.now();\n      videoObj.duration = youtubeDurationToTimeString(\n        videoData.contentDetails.duration\n      );\n      addVideo(videoObj);\n      setFormValue(''); // reset the form input value\n      setUrl(''); // this enables user to add the same url: one after the other (otherwise useEffect will not fire for the same url)\n      setValidation({\n        isFormValid: null,\n        errorMsg: '',\n        id: '',\n      });\n    } else {\n      setValidation((prev) => ({\n        ...prev,\n        isFormValid: false,\n        errorMsg: \"error: video with that id doesn't exist\",\n      }));\n    }\n  }, [data]);\n\n  function validateInput(str) {\n    const validateObj = validate(str);\n    console.log('validateObj', validateObj);\n    if (validateObj.isValidId) {\n      setValidation({\n        errorMsg: '',\n        isFormValid: true,\n        id: validateObj.id,\n      });\n    } else {\n      setValidation((prev) => ({\n        ...prev,\n        isFormValid: false,\n        errorMsg: validateObj.error,\n      }));\n    }\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setUrl(`${BASEURL}?part=${PART}&key=${KEY}&id=${validation.id}`);\n    console.log('addVideo: url: ', url);\n  }\n\n  function handleChange(e) {\n    setFormValue(e.target.value);\n    console.log('e.target.value', e.target.value);\n    console.log('formValue', formValue);\n    validateInput(e.target.value);\n  }\n\n  return (\n    <StyledForm onSubmit={handleSubmit}>\n      <StyledInput\n        type='text'\n        placeholder='Enter youtube url or id'\n        value={formValue}\n        onChange={handleChange}\n      />\n      <StyledButton disabled={!validation.isFormValid}>\n        {isLoading ? <StyledSpinner /> : 'Add'}\n      </StyledButton>\n      {validation.isFormValid === false && (\n        <StyledError>{validation.errorMsg}</StyledError>\n      )}\n    </StyledForm>\n  );\n}\n\nexport default AddVideo;\n","export const youtubeDurationToTimeString = (duration) => {\n  let hours = '',\n    minutes = '',\n    seconds = '';\n  let temp = duration.replace('PT', '').split('H');\n  if (temp.length > 1) {\n    hours = `${temp[0]}:`;\n  }\n  temp = temp.slice(-1)[0].split('M');\n  if (temp.length > 1) {\n    minutes = temp[0] < 10 ? `0${temp[0]}:` : `${temp[0]}:`;\n  } else {\n    minutes = '00:';\n  }\n  temp = temp.slice(-1)[0].split('S');\n  if (temp.length > 1) {\n    seconds = temp[0] < 10 ? `0${temp[0]}` : `${temp[0]}`;\n  } else {\n    seconds = '00';\n  }\n  return hours + minutes + seconds;\n};\n\nexport const isValidId = (str) => {\n  // official regex from https://markmail.org/message/jb6nsveqs7hya5la\n  return /[a-zA-Z0-9_-]{11}/.test(str);\n};\n\nexport const getIdFromInputString = (str) => {\n  // If empty string is returned - this implies an invalid url\n  // where either 'youtube.com' is absent or there is no v={id} param\n  let idFromInput = '';\n\n  // assume that input is a valid youtube id\n  if (str.length === 11) return str;\n  if (str.includes('youtube.com')) {\n    idFromInput = str.split('?v=')[1];\n    if (idFromInput === undefined) {\n      // no v={id} param\n      return '';\n    }\n    // remove trailing query parameters (Note: the '&' character is guaranteed not to be part of the youtube id)\n    if (idFromInput.indexOf('&') !== -1) {\n      idFromInput = idFromInput.slice(0, idFromInput.indexOf('&'));\n    }\n  } else {\n    return '';\n  }\n  // console.log('idFromInput', idFromInput);\n  return idFromInput;\n};\n\nexport const validate = (str) => {\n  const res = {};\n  let id = getIdFromInputString(str);\n\n  if (!id) {\n    res.error = 'error: invalid url';\n    res.isValidId = false;\n  } else if (!isValidId(id)) {\n    res.error = 'error: invalid youtube id';\n    res.isValidId = false;\n  } else {\n    res.isValidId = true;\n    res.id = id;\n  }\n  return res;\n};\n","import React from 'react';\nimport PlayListItem from './PlayListItem';\nimport AddVideo from './AddVideo';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport {\n  query,\n  addVideo,\n  deleteVideo,\n  getDocument,\n  updateDocument,\n} from '../database/firebase';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport styled from 'styled-components';\n\nconst StyledContainer = styled.div`\n  border: 1px solid #111;\n  padding: 1rem;\n  display: grid;\n  grid-gap: 2rem;\n  grid-template-rows: 2rem calc(90vh - 6rem);\n`;\n\nconst StyledVideosList = styled.ul`\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n`;\n\nconst StyledEmpty = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nfunction onDragEnd(result) {\n  console.log('result', result);\n\n  const { destination, source, draggableId } = result;\n\n  if (!destination) return; //if dropped outside droppable area\n  if (destination.index === source.index) return; // dropped at the same position that it started\n\n  // TODO: Get the destination id in a better way\n  let destinationId = document\n    .querySelector('ul')\n    .children[destination.index].getAttribute('data-rbd-draggable-id');\n\n  // Swap source and destination timestamps to persist drag drop (videos are ordered by timestamp)\n  // TODO: figure out how to fix the glitch on drag/drop\n  let promise = Promise.all([\n    getDocument(draggableId),\n    getDocument(destinationId),\n  ]);\n  promise.then((docs) => {\n    console.log('source doc', docs[0]);\n    console.log('destination doc', docs[1]);\n    updateDocument(destinationId, 'timestamp', docs[0].timestamp);\n    updateDocument(draggableId, 'timestamp', docs[1].timestamp);\n  });\n}\n\nfunction PlayList() {\n  const [videos] = useCollectionData(query);\n\n  return (\n    <StyledContainer>\n      <AddVideo addVideo={addVideo} />\n      {videos?.length > 0 ? (\n        <DragDropContext onDragEnd={onDragEnd}>\n          <Droppable droppableId='videos'>\n            {(provided) => (\n              <StyledVideosList\n                {...provided.droppableProps}\n                ref={provided.innerRef}\n              >\n                {videos &&\n                  videos.map((video, index) => (\n                    <PlayListItem\n                      key={video.id}\n                      id={video.id}\n                      title={video.title}\n                      duration={video.duration}\n                      deleteVideo={deleteVideo}\n                      index={index}\n                    />\n                  ))}\n                {provided.placeholder}\n              </StyledVideosList>\n            )}\n          </Droppable>\n        </DragDropContext>\n      ) : (\n        <StyledEmpty>No videos currently in playlist</StyledEmpty>\n      )}\n    </StyledContainer>\n  );\n}\n\nexport default PlayList;\n","import React from 'react';\nimport ReactPlayer from 'react-player';\nimport { query, deleteVideo } from '../database/firebase';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\nimport styled from 'styled-components';\n\nconst StyledContainer = styled.div`\n  border: 1px solid #111;\n`;\n\nconst StyledEmpty = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nfunction Video() {\n  const [videos] = useCollectionData(query);\n\n  const endCallback = () => {\n    console.log('end callback...');\n    deleteVideo(videos[0].id);\n  };\n\n  return (\n    <StyledContainer>\n      {videos?.length > 0 ? (\n        <ReactPlayer\n          width='100%'\n          height='100%'\n          playing={true}\n          controls={true}\n          url={`https://www.youtube.com/embed/${videos[0].youtubeId}`}\n          onEnded={endCallback}\n        />\n      ) : (\n        <StyledEmpty>\n          Add a video to the playlist to show the video here!\n        </StyledEmpty>\n      )}\n    </StyledContainer>\n  );\n}\n\nexport default Video;\n","import React from 'react';\nimport PlayList from './Components/PlayList';\nimport Video from './Components/Video';\nimport styled from 'styled-components';\n\nconst StyledMain = styled.main`\n  width: 90vw;\n  height: 90vh;\n  display: grid;\n  grid-gap: 2rem;\n  grid-template-columns: 1fr 2fr;\n  position: absolute;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n`;\n\nfunction App() {\n  return (\n    <StyledMain>\n      <PlayList />\n      <Video />\n    </StyledMain>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}