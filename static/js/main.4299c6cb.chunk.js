(this["webpackJsonpyoutube-playlist"]=this["webpackJsonpyoutube-playlist"]||[]).push([[0],{42:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var i,r,a,o=n(1),c=n.n(o),d=n(16),l=n.n(d),s=(n(42),n(4)),u=n(12),p=n(13),b=n(5),j=n(19),f=n(3),g=b.a.li(i||(i=Object(s.a)(["\n  padding: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: white;\n  border: 1px solid #111;\n  margin-bottom: 0.5rem;\n"]))),m=b.a.button(r||(r=Object(s.a)(["\n  padding: 0.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  min-width: 2.5rem;\n"]))),h=b.a.span(a||(a=Object(s.a)(["\n  width: 70%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])));var O=function(e){var t=e.id,n=e.title,i=e.duration,r=e.deleteVideo,a=e.index;return Object(f.jsx)(j.b,{draggableId:t,index:a,children:function(e){return Object(f.jsxs)(g,Object(u.a)(Object(u.a)(Object(u.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[Object(f.jsx)(h,{title:n,children:n}),Object(f.jsx)("span",{children:i}),Object(f.jsx)(m,{type:"button",onClick:function(){r(t)},children:"Delete"})]}))}})},v=n(21),x=n(14),y=n.n(x),w=n(20),I=n(26);n(69);I.a.initializeApp({apiKey:"AIzaSyDvVIW5etv1GDntXyTCTeHgmRls6dx7cHY",authDomain:"playlist-a1c78.firebaseapp.com",projectId:"playlist-a1c78",storageBucket:"playlist-a1c78.appspot.com",messagingSenderId:"406422948948",appId:"1:406422948948:web:208d252e5bcc59402571c1"});var V=I.a.firestore().collection("videos"),D=V.orderBy("timestamp"),S=function(){var e=Object(w.a)(y.a.mark((function e(t){var n,i,r,a,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,i=t.youtubeId,r=t.title,a=t.duration,o=t.timestamp,e.next=3,V.doc(n).set({id:n,title:r,youtubeId:i,duration:a,timestamp:o});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.doc(t).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.doc(t).get();case 2:if(!(n=e.sent).exists){e.next=5;break}return e.abrupt("return",n.data());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(w.a)(y.a.mark((function e(t,n,i){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.doc(t).update(Object(v.a)({},n,i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}();var M,P,C,E,z,R,T=function(e){var t=Object(o.useState)(null),n=Object(p.a)(t,2),i=n[0],r=n[1],a=Object(o.useState)(!1),c=Object(p.a)(a,2),d=c[0],l=c[1];return Object(o.useEffect)((function(){e&&(l(!0),r(null),fetch(e).then((function(e){return e.json()})).then((function(e){l(!1),r(e)})).catch((function(e){l(!1)})))}),[e]),{data:i,isLoading:d}},B=Object(b.b)(M||(M=Object(s.a)(["\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),H=b.a.div(P||(P=Object(s.a)(["\n  width: 0.6rem;\n  height: 0.6rem;\n  border: 2px solid aqua;\n  border-top: 2px solid transparent;\n  border-radius: 50%;\n  animation: "," 0.5s linear infinite;\n"])),B),L=b.a.div(C||(C=Object(s.a)(["\n  color: red;\n  font-size: 0.8rem;\n  position: absolute;\n  left: 0;\n  top: 100%;\n  margin-top: 0.5rem;\n"]))),q=b.a.form(E||(E=Object(s.a)(["\n  display: grid;\n  grid-gap: 1rem;\n  grid-template-columns: 1fr auto;\n  position: relative;\n"]))),G=b.a.input(z||(z=Object(s.a)(["\n  padding: 0 0.5rem;\n"]))),J=b.a.button(R||(R=Object(s.a)(["\n  padding: 0.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  min-width: 2.5rem;\n"])));var K,N,W,X=function(e){e.addvideo;var t=Object(o.useState)(""),n=Object(p.a)(t,2),i=n[0],r=n[1],a=Object(o.useState)(""),c=Object(p.a)(a,2),d=c[0],l=c[1],s=Object(o.useState)({isFormValid:null,errorMsg:"",id:""}),b=Object(p.a)(s,2),j=b[0],g=b[1],m=T(d),h=m.data,O=m.isLoading;return Object(o.useEffect)((function(){var e,t,n={},i=(null===h||void 0===h||null===(e=h.items)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id)?h.items[0]:null;console.log("data",h),null!==h&&(i?(n.youtubeId=i.id,n.id=i.id+Date.now(),n.title=i.snippet.title,n.timestamp=Date.now(),n.duration=function(e){var t="",n=e.replace("PT","").split("H");return n.length>1&&(t="".concat(n[0],":")),t+((n=n.slice(-1)[0].split("M")).length>1?n[0]<10?"0".concat(n[0],":"):"".concat(n[0],":"):"00:")+((n=n.slice(-1)[0].split("S")).length>1?n[0]<10?"0".concat(n[0]):"".concat(n[0]):"00")}(i.contentDetails.duration),S(n),r(""),l(""),g({isFormValid:null,errorMsg:"",id:""})):g((function(e){return Object(u.a)(Object(u.a)({},e),{},{isFormValid:!1,errorMsg:"error: video with that id doesn't exist"})})))}),[h]),Object(f.jsxs)(q,{onSubmit:function(e){e.preventDefault(),l("".concat("https://youtube.googleapis.com/youtube/v3/videos","?part=").concat("snippet,contentDetails","&key=").concat("AIzaSyAaDeAQGh5X6NRD4OK9iUjRlGnCAWPqEpg","&id=").concat(j.id)),console.log("addVideo: url: ",d)},children:[Object(f.jsx)(G,{type:"text",placeholder:"Enter youtube url or id",value:i,onChange:function(e){r(e.target.value),console.log("e.target.value",e.target.value),console.log("formValue",i),function(e){var t=function(e){var t={},n=function(e){var t="";return 11===e.length?e:e.includes("youtube.com")?void 0===(t=e.split("?v=")[1])?"":(-1!==t.indexOf("&")&&(t=t.slice(0,t.indexOf("&"))),t):""}(e);return n?function(e){return/[a-zA-Z0-9_-]{11}/.test(e)}(n)?(t.isValidId=!0,t.id=n):(t.error="error: invalid youtube id",t.isValidId=!1):(t.error="error: invalid url",t.isValidId=!1),t}(e);console.log("validateObj",t),t.isValidId?g({errorMsg:"",isFormValid:!0,id:t.id}):g((function(e){return Object(u.a)(Object(u.a)({},e),{},{isFormValid:!1,errorMsg:t.error})}))}(e.target.value)}}),Object(f.jsx)(J,{disabled:!j.isFormValid,children:O?Object(f.jsx)(H,{}):"Add"}),!1===j.isFormValid&&Object(f.jsx)(L,{children:j.errorMsg})]})},Q=n(22),U=b.a.div(K||(K=Object(s.a)(["\n  border: 1px solid #111;\n  padding: 1rem;\n  display: grid;\n  grid-gap: 2rem;\n  grid-template-rows: 2rem calc(90vh - 6rem);\n"]))),Y=b.a.ul(N||(N=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n"]))),Z=b.a.div(W||(W=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function _(e){console.log("result",e);var t=e.destination,n=e.source,i=e.draggableId;if(t&&t.index!==n.index){var r=document.querySelector("ul").children[t.index].getAttribute("data-rbd-draggable-id");Promise.all([F(i),F(r)]).then((function(e){console.log("source doc",e[0]),console.log("destination doc",e[1]),A(r,"timestamp",e[0].timestamp),A(i,"timestamp",e[1].timestamp)}))}}var $,ee,te=function(){var e=Object(Q.a)(D),t=Object(p.a)(e,1)[0];return Object(f.jsxs)(U,{children:[Object(f.jsx)(X,{addVideo:S}),(null===t||void 0===t?void 0:t.length)>0?Object(f.jsx)(j.a,{onDragEnd:_,children:Object(f.jsx)(j.c,{droppableId:"videos",children:function(e){return Object(f.jsxs)(Y,Object(u.a)(Object(u.a)({},e.droppableProps),{},{ref:e.innerRef,children:[t&&t.map((function(e,t){return Object(f.jsx)(O,{id:e.id,title:e.title,duration:e.duration,deleteVideo:k,index:t},e.id)})),e.placeholder]}))}})}):Object(f.jsx)(Z,{children:"No videos currently in playlist"})]})},ne=n(37),ie=n.n(ne),re=b.a.div($||($=Object(s.a)(["\n  border: 1px solid #111;\n"]))),ae=b.a.div(ee||(ee=Object(s.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));var oe,ce=function(){var e=Object(Q.a)(D),t=Object(p.a)(e,1)[0];return Object(f.jsx)(re,{children:(null===t||void 0===t?void 0:t.length)>0?Object(f.jsx)(ie.a,{width:"100%",height:"100%",playing:!0,controls:!0,url:"https://www.youtube.com/embed/".concat(t[0].youtubeId),onEnded:function(){console.log("end callback..."),k(t[0].id)}}):Object(f.jsx)(ae,{children:"Add a video to the playlist to show the video here!"})})},de=b.a.main(oe||(oe=Object(s.a)(["\n  width: 90vw;\n  height: 90vh;\n  display: grid;\n  grid-gap: 2rem;\n  grid-template-columns: 1fr 2fr;\n  position: absolute;\n  margin: auto;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"])));var le=function(){return Object(f.jsxs)(de,{children:[Object(f.jsx)(te,{}),Object(f.jsx)(ce,{})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};l.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(le,{})}),document.getElementById("root")),se()}},[[68,1,2]]]);
//# sourceMappingURL=main.4299c6cb.chunk.js.map